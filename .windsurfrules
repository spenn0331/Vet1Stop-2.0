# .windsurfrules â€” Vet1Stop (Updated Feb 2026)
# Source of truth = .workflow/project_status.md + .workflow/master-strategy.md

# 0. THE ZERO-CLUTTER MANDATE (CRITICAL)
- NEVER generate `.fixed`, `.new`, `.bak`, `.old`, or any temp backup files. 
- Overwrite existing files cleanly. Output only production-ready code.

# 1. ALWAYS FIRST
- Read `.workflow/project_status.md` top-to-bottom before ANY task to understand current sprint priorities.
- Never invent features outside of the Phase 1 MVP scope without explicit PM instructions.

# 2. Tech Stack & Boundaries (Next.js 15)
- Next.js 15 (App Router), React 19, TypeScript strict, Tailwind CSS 3.
- Firebase Auth + Analytics are LOCKED for MVP (do not attempt to replace with custom auth).
- MongoDB Atlas for all resource/health data.
- **Server vs. Client:** Respect Next.js 15 boundaries. UI components with interactivity (hooks, `localStorage`) MUST have `"use client"` at the top. Do not export metadata from client components.

# 3. The "Smart Bridge" Architecture & Data Strategy
- We do not build isolated pages; we build connected nodes.
- **PHI / Medical Data Transport:** Use `localStorage` (key = `vet1stop_recon_bridge_data`) to pass sensitive medical extractions safely between pages. It is ephemeral and privacy-first.
- **Receiver Nodes:** Must use a `useEffect` hook to parse the `localStorage` payload, hydrate state, and present an "Intel Brief" (toast notification) to the user.
- **Trend Intelligence (Analytics):** Use Firebase Analytics to log anonymized `resource_clicked` events. NEVER tie specific health clicks directly to a user's persistent database profile to avoid inferred medical records.

# 4. Phase 1 Feature Priority (Strict Order)
1. Health Page MVP (Records Recon + wired Symptom Finder + Hub).
2. Local VOB Directory (Leaflet + Real Estate).
3. PCS Commander + Smart Bridge integration.
4. Auto-Fill shared component.
- DO NOT touch Social or Shop until Health and Local are live.

# 5. UI/UX & Legal Standards
- Match the exact styling established in `src/app/health/components/RecordsReconPanel.tsx`.
- Patriotic, mobile-first design. Ensure error states and empty states are gracefully handled.
- Legal & Privacy: Bold RESPA disclaimers on real-estate forms. Crisis line (988) visible on all health modules. Auto-Fill must carry "not official VA claims assistance" disclaimers.